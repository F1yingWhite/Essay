ä¸»è¦ç”¨äºè§£å†³ä¸€äº›**å…ƒç´ åˆ†ç»„**çš„é—®é¢˜ã€‚å®ƒç®¡ç†ä¸€ç³»åˆ—**ä¸ç›¸äº¤çš„é›†åˆ**ï¼Œå¹¶æ”¯æŒä¸¤ç§æ“ä½œï¼š
- **åˆå¹¶**ï¼ˆUnionï¼‰ï¼šæŠŠä¸¤ä¸ªä¸ç›¸äº¤çš„é›†åˆåˆå¹¶ä¸ºä¸€ä¸ªé›†åˆã€‚
- **æŸ¥è¯¢**ï¼ˆFindï¼‰ï¼šæŸ¥è¯¢ä¸¤ä¸ªå…ƒç´ æ˜¯å¦åœ¨åŒä¸€ä¸ªé›†åˆä¸­ã€‚
![[Pasted image 20240512091756.png]]
å®ç°:
åœ¨åˆšå¼€å§‹çš„æ—¶å€™,æˆ‘ä»¬æŠŠæ¯ä¸ªå…ƒç´ çš„çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºä»–è‡ªå·±
```c++
void init(vector<int> &a){
	for(int i=0;i<a.size();i++)
		a[i] = i;
}
```
æŸ¥æ‰¾:
```c++
int find(vector<int> &a,int i){
	if(a[i] == i){
		reutrn i;
	}else{
		return find(a,a[i])
	}
}
```
åˆå¹¶:
```c++
void merge(vector<int>&a,int i,int j){
	a[find(j)] = find(i);
}
```
ä¸ºäº†åŠ é€ŸæŸ¥æ‰¾,æˆ‘ä»¬å¯ä»¥è¿›è¡Œè·¯å¾„å‹ç¼©,å…·ä½“æ¥è¯´å°±æ˜¯æˆ‘ä»¬åªå…³æ³¨çˆ¶èŠ‚ç‚¹,æ‰€ä»¥ç›´æ¥æŠŠèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è®¾ç½®ä¸ºçˆ¶èŠ‚ç‚¹å°±è¡Œ
```c++
int find(int x)
{
    if(x == fa[x])
        return x;
    else{
        fa[x] = find(fa[x]);  //çˆ¶èŠ‚ç‚¹è®¾ä¸ºæ ¹èŠ‚ç‚¹,æ”¹ä¸€æ­¥å°±å¯ä»¥
        return fa[x];         //è¿”å›çˆ¶èŠ‚ç‚¹
    }
}
```
ä¸ºäº†ä¿è¯æ ‘æœ€çŸ­,æˆ‘ä»¬è¿˜éœ€è¦æŒ‰ç…§ç§©(æ ‘çš„æ·±åº¦æ¥åˆå¹¶)
```c
inline void init(int n)
{
    for (int i = 1; i <= n; ++i)
    {
        fa[i] = i;
        rank[i] = 1;
    }
}
inline void merge(int i, int j)
{
    int x = find(i), y = find(j);    //å…ˆæ‰¾åˆ°ä¸¤ä¸ªæ ¹èŠ‚ç‚¹
    if (rank[x] <= rank[y])
        fa[x] = y;
    else
        fa[y] = x;
    if (rank[x] == rank[y] && x != y)
        rank[y]++;                   //å¦‚æœæ·±åº¦ç›¸åŒä¸”æ ¹èŠ‚ç‚¹ä¸åŒï¼Œåˆ™æ–°çš„æ ¹èŠ‚ç‚¹çš„æ·±åº¦+1
}
```
åªæœ‰åˆå¹¶çš„æ—¶å€™æ‰æ”¹å˜ğŸŒ²çš„ç»“æ„!
```c++
int fa[MAXN], rank[MAXN];
inline void init(int n)
{
    for (int i = 1; i <= n; ++i)
    {
        fa[i] = i;
        rank[i] = 1;
    }
}
int find(int x)
{
    return x == fa[x] ? x : (fa[x] = find(fa[x]));
}
inline void merge(int i, int j)
{
    int x = find(i), y = find(j);
    if (rank[x] <= rank[y])
        fa[x] = y;
    else
        fa[y] = x;
    if (rank[x] == rank[y] && x != y)
        rank[y]++;
}
```

